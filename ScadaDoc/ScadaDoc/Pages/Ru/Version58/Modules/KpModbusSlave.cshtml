@page "/ru/5.8/modules/kp-modbus-slave"
@{
    Layout = "_ArticleLayout";
    ViewBag.Title = "Драйвер Modbus Slave";
}

<nav class="doc-toc">
    <div class="h6">На этой странице</div>
    <hr>
    <ul>
        <li><a href="#overview">Обзор</a></li>
        <li><a href="#installation">Установка</a></li>
        <li><a href="#configuring">Конфигурирование</a></li>
    </ul>
</nav>

<div class="doc-content">
    <h1>Драйвер Modbus Slave</h1>
    <h2 id="overview">Обзор</h2>
    <p>Драйвер поддерживает стандартный <a href="https://ru.wikipedia.org/wiki/Modbus" target="_blank">протокол обмена данными Modbus</a> и работает в качестве ведомого. При использовании драйвера Коммуникатор ожидает входящих запросов и команд от стороннего устройства или приложения, которое является ведущим (мастером). Поддерживаются следующие каналы связи: последовательный порт, TCP-сервер и UDP. Драйвер может работать как в режиме Modbus RTU, так и в режиме Modbus TCP.</p>

    <p>Функции драйвера Modbus Slave:</p>
    <ol>
        <li>Приём данных от устройства с помощью команд записи.</li>
        <li>Предоставление данных устройству в ответ на команды чтения.</li>
        <li>Трансляция значений входных каналов Rapid SCADA, полученных от других устройств, для интеграции со сторонними системами.</li>
    </ol>

    <h2 id="installation">Установка</h2>
    <p>Драйвер Modbus Slave устанавливается в соответствии с <a href="../installation-and-run/module-installation#drivers">общей последовательностью установки драйверов Коммуникатора</a>. Файл библиотеки драйвера - KpModbusSlave.dll.</p>

    <h2 id="configuring">Конфигурирование</h2>
    <p>В первую очередь необходимо создать новую линию связи и КП в базе конфигурации, а также в настройках Коммуникатора. Для этой цели наиболее удобно использовать мастеры, которые вызываются с помощью кнопок <img src="../common-images/add_line.png" /> и <img src="../common-images/add_device.png" />. Адрес КП имеет важное значение - именно на этот ID устройства будет отвечать Коммуникатор. В основных параметрах линии связи необходимо выбрать тип канала связи и настроить его свойства. Примеры настройки канала связи показаны на рисунках ниже:</p>
    <figure class="figure">
        <img src="kp-modbus-slave-files/serial_port_ru.png" class="figure-img img-fluid" alt="Свойства последовательного порта" />
    </figure>
    <figure class="figure">
        <img src="kp-modbus-slave-files/tcp_server_ru.png" class="figure-img img-fluid" alt="Свойства TCP-сервер" />
    </figure>

    <p>После создания КП в Коммуникаторе, необходимо настроить его, вызвав форму свойств КП.</p>
    <figure class="figure">
        <img src="kp-modbus-slave-files/device_props_ru.png" class="figure-img img-fluid" alt="Свойства КП Modbus Slave" />
    </figure>

    <p><em>Период актальности входных данных</em> позволяет автоматически устанавливать неопределённый статус входных тегов КП, если от устройства не было получено новых данных в течение заданного времени.</p>
    <p><em>Шаблон устройства</em> определяет карту регистров Modbus. Шаблоны устройств драйверов KpModbus.dll и KpModbusSlave.dll полностью совместимы.</p>
    <p><em>КП источника данных</em> устанавливается отличным от нуля, чтобы транслировать значения входных каналов, полученных от другого устройства, в стороннюю систему. Если драйвер используется для взаимодействия с реальным прибором, этот параметр должен быть равен 0.</p>

    <p>На следующем рисунке показан редактор шаблонов Modbus:</p>
    <figure class="figure">
        <img src="kp-modbus-slave-files/template_editor_ru.png" class="figure-img img-fluid" alt="Редактор шаблонов Modbus" />
    </figure>

    <p>Драйвер Modbus Slave требует регистрации. После завершения настройки передайте проект на сервер с помощью кнопки <img src="../common-images/upload.png" />. Затем откройте страницу <em>Драйверы</em> в приложении Администратор, выберите драйвер KpModbusSlave.dll, откройте свойства драйвера и зарегистрируйте его. После регистрации повторно передайте проект на сервер.</p>
</div>
