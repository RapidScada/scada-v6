@page "/ru/5.8/modules/mod-rapid-gate"
@{
    Layout = "_ArticleLayout";
    ViewBag.Title = "Модуль Быстрый шлюз";
}

<nav class="doc-toc">
    <div class="h6">На этой странице</div>
    <hr>
    <ul>
        <li><a href="#overview">Обзор</a></li>
        <li><a href="#installation">Установка</a></li>
        <li><a href="#configuring">Конфигурирование</a></li>
        <li><a href="#archive-uploading">Передача архивов</a></li>
    </ul>
</nav>

<div class="doc-content">
    <h1>Модуль Быстрый шлюз</h1>
    <h2 id="overview">Обзор</h2>
    <p>Модуль Быстрый шлюз предназначен для синхронизации данных между различными экземплярами Rapid SCADA. Модуль позволяет организовать работу резервного сервера, а также обеспечивает передачу данных от SCADA, установленных на удалённых объектах, на главную SCADA. Модуль поддерживает произвольное количество независимых шлюзов для обмена информацией с несколькими серверами Rapid SCADA.</p>

    <h2 id="installation">Установка</h2>
    <p>Модуль Быстрый шлюз устанавливается в соответствии с <a href="../installation-and-run/module-installation#modules">общей последовательностью установки модулей Сервера</a>. Файл библиотеки модуля - ModRapidGate.dll. После подключения модуля необходимо выполнить несколько дополнительных действий:</p>
    <ol>
        <li>Скопировать в редактируемый проект файлы конфигурации модуля ModRapidGate.xml и ModRapidGate_Reg.xml. В проекте данные файлы должны располагаться в директории ScadaServer\Config\</li>
        <li>После активации модуля передать проект на сервер, чтобы при перезапуске службы Сервера определить код компьютера для регистрации. Код компьютера выводится в журнал C:\SCADA\ScadaServer\Log\ModRapidGate.log</li>
        <li>Зарегистрировать модуль, связавшись с разработчиками или с помощью <a href="https://rapidscada.net/trial/?prod=ModRapidGate&lang=ru" target="_blank">сервиса генерации демо-ключей</a>. Регистрационный ключ сохраняется в файле проекта ScadaServer\Config\ModRapidGate_Reg.xml между тегами RegKey.</li>
        <li>Сконфигурировать модуль и передать проект на сервер.</li>
    </ol>

    <h2 id="configuring">Конфигурирование</h2>
    <p>Чтобы сконфигурировать модуль Быстрый шлюз, необходимо отредактировать файл ScadaServer\Config\ModRapidGate.xml, расположенный внутри проекта, с помощью текстового редактора. Обратите внимание, на целевом сервере может потребоваться настройка брандмауэра, чтобы разрешить входящие подключения по TCP-порту 10000.</p>

    <p>Кратко рассмотрим содержимое файла конфигурации:</p>

    <table class="table table-hover">
        <thead>
            <tr>
                <th>XML-тэг</th>
                <th>Описание</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Gate</td>
                <td>Секция шлюза. Таких секций может быть несколько</td>
            </tr>
            <tr>
                <td>GeneralOptions</td>
                <td>Основные параметры шлюза</td>
            </tr>
            <tr>
                <td>ConnectionOptions</td>
                <td>Параметры соединения с удалённым сервером. Пароль должен быть зашифрован с помощью утилиты <a href="https://rapidscada.ru/download/encrypt_password.zip">EncryptPassword.exe</a></td>
            </tr>
            <tr>
                <td>MappingOptions</td>
                <td>Соответствие номеров каналов, объектов и КП между данным сервером и удалённым</td>
            </tr>
            <tr>
                <td>TransferOptions</td>
                <td>Параметры передачи данных на удалённый сервер</td>
            </tr>
            <tr>
                <td>CurDataTransferOptions</td>
                <td>Параметры передачи текущих данных</td>
            </tr>
            <tr>
                <td>ArcDataTransferOptions</td>
                <td>Параметры передачи архивных данных</td>
            </tr>
            <tr>
                <td>EventTransferOptions</td>
                <td>Параметры передачи событий</td>
            </tr>
            <tr>
                <td>InCmdTransferOptions</td>
                <td>Параметры получения команд ТУ от удалённого сервера</td>
            </tr>
            <tr>
                <td>OutCmdTransferOptions</td>
                <td>Параметры передачи команд ТУ на удалённый сервер</td>
            </tr>
            <tr>
                <td>ArcUploadOptions</td>
                <td>Параметры закачки архивов на удалённый сервер</td>
            </tr>
        </tbody>
    </table>

    <h2 id="archive-uploading">Передача архивов</h2>
    <p>Состояние закачки архивов сохраняется в процессе работы модуля и восстанавливается при перезапуске службы Сервера. Файл состояния записывается в директорию Storage. Закачка архивов выполняется автоматически. Однако можно вручную отправить команду на закачку архивов за определённый период. Команда должна быть отправлена на канал управления, указанный в конфигурации модуля, и иметь бинарный тип.</p>
    <p>Пример команды:</p>
    <pre><code>cmd=ArcUpload
minDT=2020-02-18 10:00:00
maxDT=2020-02-18 10:15:00</code></pre>
</div>
