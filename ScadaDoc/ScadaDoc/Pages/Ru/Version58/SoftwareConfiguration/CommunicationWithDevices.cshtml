@page "/ru/5.8/software-configuration/communication-with-devices"
@{
    Layout = "_ArticleLayout";
    ViewBag.Title = "Настройка обмена данными с устройствами";
}

<h1>Настройка обмена данными с устройствами</h1>

<p>Взаимодействие с физическими или мнимыми устройствами выполняется программой Коммуникатор, которая, выступая в качестве ведущего (Master) или ведомого (Slave), производит опрос данных и передачу команд устройствам. Все устройства привязываются к своим линиям связи, которые не зависят друг от друга и опрашиваются параллельно.</p>

<p>Пользовательский интерфейс Коммуникатора, предназначенный для настройки, встроен в приложение Администратор. Настройка Коммуникатора выполняется как часть проекта.</p>

<p>На рис. 1 показан пример настройки основных параметров линии связи. Канал связи определяет, с помощью какого физического интерфейса или сетевого протокола производится обмен данными с устройствами. Поддерживаются следующие каналы связи: Последовательный порт, TCP-клиент, TCP-сервер, UDP. В некоторых случаях, если взаимодействие с устройствами реализовано в драйвере КП, канал связи следует оставить незаданным (например, при использовании драйвера OPC).</p>

<p>Если отправлять команды телеуправления (ТУ) устройствам не требуется, в целях безопасности рекомендуется снять галочку <em>Команды ТУ разрешены</em>.</p>

<figure class="figure">
    <img src="communication-with-devices-files/comm_line_params_ru.png" class="figure-img img-fluid" alt="Основные параметры линии связи" />
    <figcaption class="figure-caption">Рис. 1. Основные параметры линии связи</figcaption>
</figure>

<figure class="figure">
    <img src="communication-with-devices-files/comm_line_req_ru.png" class="figure-img img-fluid" alt="Параметры опроса КП" />
    <figcaption class="figure-caption">Рис. 2. Параметры опроса КП</figcaption>
</figure>

<p>Порядок и параметры опроса КП на линии связи задаются на странице <em>Опрос КП</em> (рис. 2).</p>

<p>При снятии флажка <em>Активна</em> для линии связи данная линия будет полностью отключена со всеми относящимися к ней КП. При снятии флажка <em>Активен</em> для КП опрос и отправка команды соответствующему КП на линии связи будут отключены.</p>

<p>С помощью флажков <em>Привязан к Серверу</em> можно включить или отключить для определённых КП или для всей линии связи отправку данных программе Сервер. Если открыть страницу <em>Общие параметры</em> настроек Коммуникатора и снять флажок <em>Взаимодействовать с Сервером</em>, то взаимодействие Коммуникатора и Сервера будет полностью отключено. Эти возможности удобно использовать при тестировании новых подключаемых к системе устройств.</p>

<p>Если в свойствах КП поля <em>Время</em> и <em>Период</em> нулевые, то опрос КП производится непрерывно циклически. Если для КП указано время, а период равен нулю, то опрос выполняется один раз в сутки в указанное время. Если период не нулевой, то КП опрашивается периодически, начиная с заданного времени. Поля <em>Таймаут</em> и <em>Пауза</em> определяют длительность ожидания ответа от устройства и задержку после приёма данных. Поле <em>Командная строка</em> позволяет задать дополнительные параметры работы КП, которые определяются драйвером КП и указаны в его описании.</p>

<p>Кнопка <em>Сброс</em> позволяет восстановить параметры опроса КП по умолчанию, которые заложены в DLL, выбранной из списка. Если данная DLL поддерживает отображение свойств конкретного КП, то они открываются кнопкой <em>Свойства</em> или из контекстного меню элемента дерева, соответствующего КП. Для некоторых типов КП задаются общие глобальные свойства, в этом случае они редактируются по кнопке <em>Свойства</em> на странице <em>Драйверы</em>.</p>

<p>Чтобы импортировать линии связи и КП из базы конфигурации в Коммуникатор, в проводнике проекта нужно щёлкнуть правой кнопкой мыши на родительском узле линий связи или на узле конкретной линии связи и в контекстном меню выбрать пункт <em>Импортировать</em>. Форма импорта показана на рис. 3.</p>

<figure class="figure">
    <img src="communication-with-devices-files/comm_import_ru.png" class="figure-img img-fluid" alt="Импорт настроек Коммуникатора" />
    <figcaption class="figure-caption">Рис. 3. Импорт настроек Коммуникатора</figcaption>
</figure>

<p>Функция синхронизации настроек (рис. 4) также вызывается из контекстного меню линии связи. Синхронизация позволяет обновить параметры существующих линий связи и КП по базе конфигурации, однако при этом могут утеряны параметры, введённые пользователем вручную.</p>

<figure class="figure">
    <img src="communication-with-devices-files/comm_sync_ru.png" class="figure-img img-fluid" alt="Синхронизация настроек Коммуникатора" />
    <figcaption class="figure-caption">Рис. 4. Синхронизация настроек Коммуникатора</figcaption>
</figure>
